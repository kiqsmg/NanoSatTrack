"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=require("@nivo/core"),o=require("d3-scale"),i=require("d3-delaunay"),r=require("react/jsx-runtime");function t(){return t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},t.apply(this,arguments)}var l={xDomain:[0,1],yDomain:[0,1],layers:["links","cells","points","bounds"],enableLinks:!1,linkLineWidth:1,linkLineColor:"#bbbbbb",enableCells:!0,cellLineWidth:2,cellLineColor:"#000000",enablePoints:!0,pointSize:4,pointColor:"#666666",role:"img"},u=function(e){return"function"==typeof e?e:function(n){return n[e]}},s=function(e){var n=e.points,o=e.x,i=void 0===o?"x":o,r=e.y,t=void 0===r?"y":r,l=u(i),s=u(t);return n.map((function(e){return[l(e),s(e)]}))},a=function(e){var n=e.points,o=e.width,r=e.height,t=e.debug,l=i.Delaunay.from(n),u=t?l.voronoi([0,0,o,r]):void 0;return{delaunay:l,voronoi:u}},d=function(n){var o=n.points,i=n.x,r=n.y,t=n.width,l=n.height,u=n.debug,d=e.useMemo((function(){return s({points:o,x:i,y:r})}),[o,i,r]);return e.useMemo((function(){return a({points:d,width:t,height:l,debug:u})}),[d,t,l,u])},c=function(n){var r=n.data,t=n.width,l=n.height,u=n.xDomain,s=n.yDomain,a=e.useMemo((function(){return o.scaleLinear().domain(u).range([0,t])}),[u,t]),d=e.useMemo((function(){return o.scaleLinear().domain(s).range([0,l])}),[s,l]),c=e.useMemo((function(){return r.map((function(e){return{x:a(e.x),y:d(e.y),data:e}}))}),[r,a,d]);return e.useMemo((function(){var e=i.Delaunay.from(c.map((function(e){return[e.x,e.y]}))),n=e.voronoi([0,0,t,l]);return{points:c,delaunay:e,voronoi:n}}),[c,t,l])},h=function(n){var o=n.points,i=n.delaunay,r=n.voronoi;return e.useMemo((function(){return{points:o,delaunay:i,voronoi:r}}),[o,i,r])},p=["theme"],v=function(o){var i=o.data,t=o.width,u=o.height,s=o.margin,a=o.layers,d=void 0===a?l.layers:a,p=o.xDomain,v=void 0===p?l.xDomain:p,f=o.yDomain,x=void 0===f?l.yDomain:f,m=o.enableLinks,y=void 0===m?l.enableLinks:m,b=o.linkLineWidth,g=void 0===b?l.linkLineWidth:b,k=o.linkLineColor,C=void 0===k?l.linkLineColor:k,M=o.enableCells,j=void 0===M?l.enableCells:M,L=o.cellLineWidth,W=void 0===L?l.cellLineWidth:L,w=o.cellLineColor,D=void 0===w?l.cellLineColor:w,P=o.enablePoints,V=void 0===P?l.enableCells:P,S=o.pointSize,O=void 0===S?l.pointSize:S,q=o.pointColor,R=void 0===q?l.pointColor:q,z=o.role,E=void 0===z?l.role:z,A=n.useDimensions(t,u,s),F=A.outerWidth,H=A.outerHeight,T=A.margin,_=A.innerWidth,B=A.innerHeight,I=c({data:i,width:_,height:B,xDomain:v,yDomain:x}),G=I.points,J=I.delaunay,K=I.voronoi,N={links:null,cells:null,points:null,bounds:null};y&&d.includes("links")&&(N.links=r.jsx("path",{stroke:C,strokeWidth:g,fill:"none",d:J.render()},"links")),j&&d.includes("cells")&&(N.cells=r.jsx("path",{d:K.render(),fill:"none",stroke:D,strokeWidth:W},"cells")),V&&d.includes("points")&&(N.points=r.jsx("path",{stroke:"none",fill:R,d:J.renderPoints(void 0,O/2)},"points")),d.includes("bounds")&&(N.bounds=r.jsx("path",{fill:"none",stroke:D,strokeWidth:W,d:K.renderBounds()},"bounds"));var Q=h({points:G,delaunay:J,voronoi:K});return r.jsx(n.SvgWrapper,{width:F,height:H,margin:T,role:E,children:d.map((function(n,o){return void 0!==N[n]?N[n]:"function"==typeof n?r.jsx(e.Fragment,{children:e.createElement(n,Q)},o):null}))})},f=function(e){var o=e.theme,i=function(e,n){if(null==e)return{};var o,i,r={},t=Object.keys(e);for(i=0;i<t.length;i++)o=t[i],n.indexOf(o)>=0||(r[o]=e[o]);return r}(e,p);return r.jsx(n.Container,{isInteractive:!1,animate:!1,theme:o,children:r.jsx(v,t({},i))})};exports.Mesh=function(o){var i=o.nodes,t=o.width,l=o.height,u=o.x,s=o.y,a=o.onMouseEnter,c=o.onMouseMove,h=o.onMouseLeave,p=o.onClick,v=o.debug,f=e.useRef(null),x=e.useState(null),m=x[0],y=x[1],b=d({points:i,x:u,y:s,width:t,height:l,debug:v}),g=b.delaunay,k=b.voronoi,C=e.useMemo((function(){if(v&&k)return k.render()}),[v,k]),M=e.useCallback((function(e){if(!f.current)return[null,null];var o=n.getRelativeCursor(f.current,e),r=o[0],t=o[1],l=g.find(r,t);return[l,void 0!==l?i[l]:null]}),[f,g]),j=e.useCallback((function(e){var n=M(e),o=n[0],i=n[1];y(o),i&&(null==a||a(i,e))}),[M,y,a]),L=e.useCallback((function(e){var n=M(e),o=n[0],i=n[1];y(o),i&&(null==c||c(i,e))}),[M,y,c]),W=e.useCallback((function(e){if(y(null),h){var n=void 0;null!==m&&(n=i[m]),n&&h(n,e)}}),[y,m,h,i]),w=e.useCallback((function(e){var n=M(e),o=n[0],i=n[1];y(o),i&&(null==p||p(i,e))}),[M,y,p]);return r.jsxs("g",{ref:f,children:[v&&k&&r.jsxs(r.Fragment,{children:[r.jsx("path",{d:C,stroke:"red",strokeWidth:1,opacity:.75}),null!==m&&r.jsx("path",{fill:"pink",opacity:.35,d:k.renderCell(m)})]}),r.jsx("rect",{width:t,height:l,fill:"red",opacity:0,style:{cursor:"auto"},onMouseEnter:j,onMouseMove:L,onMouseLeave:W,onClick:w})]})},exports.ResponsiveVoronoi=function(e){return r.jsx(n.ResponsiveWrapper,{children:function(n){var o=n.width,i=n.height;return r.jsx(f,t({width:o,height:i},e))}})},exports.Voronoi=f,exports.computeMesh=a,exports.computeMeshPoints=s,exports.defaultVoronoiProps=l,exports.renderVoronoiCellToCanvas=function(e,n,o){e.save(),e.globalAlpha=.35,e.beginPath(),n.renderCell(o,e),e.fillStyle="red",e.fill(),e.restore()},exports.renderVoronoiToCanvas=function(e,n){e.save(),e.globalAlpha=.75,e.beginPath(),n.render(e),e.strokeStyle="red",e.lineWidth=1,e.stroke(),e.restore()},exports.useVoronoi=c,exports.useVoronoiLayerContext=h,exports.useVoronoiMesh=d;
//# sourceMappingURL=nivo-voronoi.cjs.js.map
